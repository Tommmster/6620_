\documentclass[9pt,a4paper]{article}

\usepackage[spanish]{babel}
\selectlanguage{spanish}
\usepackage[utf8]{inputenc}
\usepackage{geometry}
\usepackage{url}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{fancyhdr}

\newcommand{\stdout}{\texttt{stdout}}
\newcommand{\stdin}{\texttt{stdin}}
\newcommand{\stderr}{\texttt{stderr}}
\newcommand{\gprof}{\texttt{gprof}}
\newcommand{\nl}{\texttt{nl}}
\newcommand{\unixtime}{\texttt{time}}

\pagestyle{fancy}

\title{6620: Organización de computadoras.\\ Trabajo práctico 0: Infraestructura básica}
\begin{document}

\maketitle
 \section{Objetivos}
El objetivo de este trabajo es familiarizarse con las herramientas de software que usaremos en los siguientes
trabajos, implementando un programa (y su correspondiente documentación) que 
resuelva el problema piloto que presentaremos más abajo.
 
 \section{Recursos}
 
Usaremos el programa GXemul \cite{GXEMUL} para simular el entorno de desarrollo
que utilizaremos en este y otros trabajos prácticos, una máquina MIPS corriendo
una versión reciente del sistema operativo NetBSD \cite{NETBSD}.

En la clase del 21/8 hemos repasado, brevemente, los pasos necesarios para la 
instalación y configuración del entorno de desarrollo.

También se usará el programa \gprof{} que permite hacer un análisis de cómo se reparte el tiempo de ejecución de un programa entre sus componentes.
\section{Introducción}
El trabajo práctico consiste en implementar y optimizar una versión minimalista
del comando \nl\cite{NL} de Unix. El mismo recibe texto e imprime por \stdout{} las 
líneas numeradas.

Una vez implementado, se debe utilizar \gprof\cite{GPROF} para buscar las secciones del programa que consumen
más tiempo de ejecución

\section{El programa}
El programa debe leer el contenido de uno o mas archivos y por cada línea, imprimir el número de línea, seguido de la línea propiamente dicha.
En caso de que no se indique ningún archivo, entonces debe leerse de \stdin.

Esta versión de \nl{} solo debe implementar las siguientes opciones:
\begin{itemize}
\item \texttt{-s}, \texttt{--number-separator}. Indica el texto separador entre número de línea y la línea.
\item \texttt{-v}, \texttt{--starting-line-number}. Indica el número de la primer línea.
\item \texttt{-i}, \texttt{--line-increment}. Indica el incremento entre líneas consecutivas.
\item \texttt{-t}, \texttt{--non-empty}. Si está presente, solo se deben numerar las líneas no vacias. Caso contrario,
también deben numerar las líneas vacias 
\item \texttt{-l}, \texttt{--join-blank-lines}. Indica la cantidad de líneas vacias a agrupar en una única línea.
\item \texttt{-h}, \texttt{--help}. Imprime el mensaje de ayuda.
\end{itemize}

Los resultados deben ser impresos en \stdout{}, mientras que los mensajes de error u otras cuestiones deben imprimirse por \stderr{}.

\subsection{Mediciones}
Una vez que el programa haya sido implementado y verificado, el programa debe ser optimizado. Con este objetivo en mente, debe
utilizarse \gprof{} para analizar corridas del programa y determinar cuales son las funciones aptas para ser optimizadas.

Mediante el comando \unixtime\cite{TIME} es posible medir el tiempo de ejecución del programa. Por cada versión del programa
se debe calcular el \textit{speed up} obtenido.

\section{Ejemplos}

\noindent
Mostramos el mensaje de ayuda:
\begin{small}
\begin{verbatim}
$tp0 -h
USAGE:
tp0 [OPTION]...[FILE]...
Write each FILE to standard output, with line numbers added.  With no FILE, or when FILE is -,
read standard input

OPTIONS:
-h, --help	Print this message and quit
-s, --number-separator (mandatory argument)
-v, --starting-line-number (mandatory argument)
-i, --line-increment (mandatory argument)
-l, --join-blank-lines (mandatory argument)
-t, --non-blank
$
\end{verbatim}
\end{small}

\noindent
Procesamos un único archivo:
\begin{small}
\begin{verbatim}
$tp0 -s="-->" -v 3 --line-increment=2 in.txt
3-->While Belgium is bleeding and hoping, while Poland suffers and dreams of
5-->liberation, while Serbia is waiting for redemption, there is a little
7-->country the soul of which is torn to pieces--a little country that is so
9-->remote, so remote that her ardent sighs cannot be heard.
$
\end{verbatim}
\end{small}

\begin{small}
\begin{verbatim}
$cat dante.txt | tp0 -t
1-->O'er better waves to speed her rapid course
2-->The light bark of my genius lifts the sail,
3-->Well pleas'd to leave so cruel sea behind;

4-->And of that second region will I sing,
5-->In which the human spirit from sinful blot
6-->Is purg'd, and for ascent to Heaven prepares.
\end{verbatim}
\end{small}


\section{Entregables}
El trabajo práctico debe ser entregado en un folio A4, acompañado por un CD. Estos
deben incluir:
\begin{itemize}
\item El informe, incluyendo los objetivos del trabajo práctico, las conclusiones y todos los 
datos utilizados en su elaboración. Esto incluye corridas de \gprof, \unixtime, y mediciones relevantes
\item El código fuente en C.
\item El código assembly generado por el compilador, \textbf{solo en formato digital}.
\item Este enunciado.
\end{itemize}

\section{Fechas de entrega}
\begin{itemize}
\item Fecha de entrega: Jueves 11 de Septiembre de 2014
\item Fecha de vencimiento: Jueves 25 de Septiembre de 2014
\end{itemize}

\begin{thebibliography}{99}
\bibitem{GXEMUL}  GXemul, \url{http://gavare.se/gxemul/}.
\bibitem{NETBSD}  The NetBSD project, \url{http://www.netbsd.org/}.
\bibitem{NL}\nl{} man page, \url{http://www.manpagez.com/man/1/nl/}
\bibitem{GPROF} \gprof{} manual, \url{https://www.cs.utah.edu/dept/old/texinfo/as/gprof.html}
\bibitem{TIME} \unixtime{} man page  , \url{http://linux.die.net/man/1/time}
\end{thebibliography}
\end{document}
